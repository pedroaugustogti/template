<ui:composition xmlns="http://www.w3.org/1999/xhtml"
				xmlns:ui="http://java.sun.com/jsf/facelets"
		      	xmlns:h="http://java.sun.com/jsf/html"
		      	xmlns:f="http://java.sun.com/jsf/core"
		      	xmlns:p="http://primefaces.org/ui"
		      	template="/pages/template/templateDefault.xhtml">

	<ui:define name="title">#{msg['MSI008']}</ui:define>
	
	<ui:define name="body">	 
	
		<f:event listener="#{templateBeanPesquisa.renderizaMensagensDaSessao()}" type="preRenderView" />
	
		<h:form id="form">
		 
			<p:messages id="messages" autoUpdate="true" closable="true" style="margin:0 auto; width:80%; text-align:center;" />
			
			 <div id="logout" style="margin:0 auto; width:80%; text-align:left;" >
			 
			 	<p:commandButton action="#{templateBeanPesquisa.logout()}" icon="ui-icon-power"></p:commandButton>
			 	<p:separator></p:separator>
			 	
			 </div>
		
		    <p:panel id="pesquisa" header="#{msg['MSI008']}" style="margin:0 auto; width:80%; text-align:center;" >
		    
		        <h:panelGrid columns="2" cellpadding="10" style="margin:0 auto;">
		        
	           		<p:outputLabel for="nome" value="#{msg['MSI009']}" />
	           		
	            	<p:inputText id="nome" value="#{templateBeanPesquisa.filtroEntidadeExemploDTO.nome}" 
					 	maxlength="45" style="width:250px"/>
					 	
				 	<p:outputLabel for="nome" value="#{msg['MSI010']}" />
					 	
			 		<p:selectOneMenu id="sexo" value="#{templateBeanPesquisa.filtroEntidadeExemploDTO.sexo}"  style="width:250px">
			            <f:selectItem itemLabel="#{msg['MSI011']}" noSelectionOption="true"/>
			            <f:selectItem itemLabel="#{msg['MSI012']}" itemValue="#{msg['MSI014']}" />
			            <f:selectItem itemLabel="#{msg['MSI013']}" itemValue="#{msg['MSI015']}" />
       				</p:selectOneMenu>
       				
       				<p:outputLabel for="data" value="#{msg['MSI016']}" />
       				
       				<p:calendar value="#{templateBeanPesquisa.filtroEntidadeExemploDTO.dataNascimento}"  
							maxlength="10" id="data" style="width:250px"
							pattern="dd/MM/yyyy" locale="pt_BR"/>
							
		        </h:panelGrid>
		        
		        <h:panelGrid columns="3" cellpadding="10" style="margin:0 auto;">
		        
	        		<p:commandButton id="btnPesquisar" value="#{msg['MSI027']}" action="#{templateBeanPesquisa.pesquisar()}" update="grid"/>
					<p:commandButton id="btnLimpar" value="#{msg['MSI028']}" action="#{templateBeanPesquisa.init()}" update="pesquisa"/>	
					<p:commandButton id="btnCadastrar" value="#{msg['MSI029']}" action="#{templateBeanPesquisa.redirecionaPagina('CADASTRAR_PESSOA')}" rendered="#{templateBeanPesquisa.autorizaFuncionalidade('CADASTRAR_PESSOA')}"/>
					
		        </h:panelGrid>
		        
		    </p:panel>
		    
		    <p:separator style="margin:0 auto; width:80%; text-align:center;"></p:separator>
		    
		    <p:panel id="grid" style="margin:0 auto; width:80%; text-align:center;">
		    	
		    	 <p:dataTable id="gridPessoa" var="pessoa" value="#{templateBeanPesquisa.entidades}" emptyMessage="#{msg['MSI017']}">
			        <f:facet name="header">
			            #{msg['MSI018']}
			        </f:facet>
				        <p:column headerText="#{msg['MSI030']}">
				            <h:outputText value="#{pessoa.id}" />
				        </p:column>
				        <p:column headerText="#{msg['MSI009']}">
				            <h:outputText value="#{pessoa.nome}" />
				        </p:column>
				        <p:column headerText="#{msg['MSI010']}">
				            <h:outputText value="#{pessoa.sexo.value}" />
				        </p:column>
				        <p:column headerText="#{msg['MSI016']}">
				            <h:outputText value="#{pessoa.dataNascimento}" >
								<f:convertDateTime dateStyle="default"/>
							</h:outputText>
				        </p:column>
				        <p:column style="width:40px;text-align: center;margin:0 auto;" rendered="#{templateBeanPesquisa.autorizaFuncionalidade('VISUALIZAR_PESSOA')}">
				             <p:commandButton oncomplete="PF('infoPessoa').show()" icon="ui-icon-search" title="#{msg['MSI019']}" update=":form">
				                <f:setPropertyActionListener value="#{pessoa}" target="#{templateBeanPesquisa.entidadeSelecionada}" />
				            </p:commandButton>
				        </p:column>
				        <p:column style="width:40px;text-align: center;margin:0 auto;" rendered="#{templateBeanPesquisa.autorizaFuncionalidade('ALTERAR_PESSOA')}">
				             <p:commandButton icon="ui-icon-refresh" title="#{msg['MSI020']}" action="#{templateBeanPesquisa.redirecionaParaTelaAlterar(pessoa)}"/>
				        </p:column>
				        <p:column style="width:40px;text-align: center; margin:0 auto;"  rendered="#{templateBeanPesquisa.autorizaFuncionalidade('EXCLUIR_PESSOA')}">
				             <p:commandButton oncomplete="PF('confirmaExclusao').show()" icon="ui-icon-trash" title="#{msg['MSI021']}" update="gridPessoa">
				                <f:setPropertyActionListener value="#{pessoa}" target="#{templateBeanPesquisa.entidadeSelecionada}" />
				            </p:commandButton>
				        </p:column>
				    </p:dataTable>
				    
				    <h:panelGrid columns="3" cellpadding="10" style="margin:0 auto;">
		        
		        		<p:commandButton icon="ui-icon-clipboard" rendered="#{not empty templateBeanPesquisa.entidades and templateBeanPesquisa.autorizaFuncionalidade('GERAR_RELATORIO_CONSULTA')}"
                                     value="#{msg['MSI022']}" 
                                     ajax="false"
                                     actionListener="#{templateBeanPesquisa.gerarRelatorio()}">
                    	</p:commandButton>
			        </h:panelGrid>
		    </p:panel>
		    
		    <p:dialog id="dialog" header="#{msg['MSI023']}" widgetVar="infoPessoa" modal="true" showEffect="fade" hideEffect="fade" resizable="false">
		        <p:outputPanel id="infoPessoa" style="text-align:center;">
		            <p:panelGrid  columns="2" >
		 
		                <h:outputText value="#{msg['MSI030']}" />
		                <h:outputText value="#{templateBeanPesquisa.entidadeSelecionada.id}" />
		 
		                <h:outputText value="#{msg['MSI009']}" />
		                <h:outputText value="#{templateBeanPesquisa.entidadeSelecionada.nome}" />
		 
		                <h:outputText value="#{msg['MSI010']}" />
		                <h:outputText value="#{templateBeanPesquisa.entidadeSelecionada.sexo.value}"/>
		 
		                <h:outputText value="#{msg['MSI016']}" />
		                <h:outputText value="#{templateBeanPesquisa.entidadeSelecionada.dataNascimento}" >
							<f:convertDateTime dateStyle="default"/>
						</h:outputText>
		            </p:panelGrid>
		        </p:outputPanel>
		    </p:dialog>
		    
		    <p:dialog id="alertaExclusao" header="#{msg['MSI031']}" widgetVar="confirmaExclusao" modal="true" showEffect="fade" hideEffect="fade" resizable="false" style="text-align:center; border:none !important;" >
		        <p:outputPanel id="confirmaExclusao" style="text-align:center; border:none !important;">
		            <p:panelGrid style="border:none !important;">
		 
		                <p:row>
				            <p:column colspan="2">#{msg['MSI024']}</p:column>
				        </p:row>
				        
				        <p:row>
				        	<p:column>
					            <p:commandButton oncomplete="PF('confirmaExclusao').hide()" action="#{templateBeanPesquisa.excluir()}" value="#{msg['MSI025']}" update="gridPessoa"></p:commandButton>
					            <p:commandButton oncomplete="PF('confirmaExclusao').hide()" value="#{msg['MSI026']}"></p:commandButton>
				            </p:column>
				        </p:row>
 
		            </p:panelGrid>
		        </p:outputPanel>
		    </p:dialog>
		</h:form>
	</ui:define>
</ui:composition>